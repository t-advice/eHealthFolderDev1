<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="eHealthFolderDev.Views.MyProfilePage"
             Title="My Profile"
             BackgroundColor="White">
    
    <Grid>
        <ScrollView>
            <VerticalStackLayout Padding="25" Spacing="20">
                
                <!-- Header -->
                <Label Text="{Binding PageTitle}"
                       FontSize="28" 
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Margin="0,10,0,20"/>

                <!-- Personal Information Section -->
                <Label Text="Personal Information" 
                       FontSize="18" 
                       FontAttributes="Bold"
                       TextColor="#4CAF50"/>
                
                <Frame Padding="15" 
                       BackgroundColor="#F5F5F5" 
                       BorderColor="#E0E0E0"
                       CornerRadius="10">
                    <VerticalStackLayout Spacing="15">
                        
                        <!-- First Name -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="First Name *" FontSize="14" FontAttributes="Bold"/>
                            <Entry Text="{Binding CurrentPerson.FirstName}" Placeholder="Enter first name" FontSize="16"/>
                        </VerticalStackLayout>

                        <!-- Last Name -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Last Name *" FontSize="14" FontAttributes="Bold"/>
                            <Entry Text="{Binding CurrentPerson.LastName}" Placeholder="Enter last name" FontSize="16"/>
                        </VerticalStackLayout>

                        <!-- ID Number -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="ID Number *" FontSize="14" FontAttributes="Bold"/>
                            <Entry Text="{Binding CurrentPerson.IDNumber}" Placeholder="Enter ID number" Keyboard="Numeric" FontSize="16"/>
                        </VerticalStackLayout>

                        <!-- Gender -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Gender *" FontSize="14" FontAttributes="Bold"/>
                            <Picker SelectedItem="{Binding CurrentPerson.Gender}" FontSize="16">
                                <Picker.Items>
                                    <x:String>Male</x:String>
                                    <x:String>Female</x:String>
                                    <x:String>Other</x:String>
                                    <x:String>Prefer not to say</x:String>
                                </Picker.Items>
                            </Picker>
                        </VerticalStackLayout>

                        <!-- Date of Birth -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Date of Birth *" FontSize="14" FontAttributes="Bold"/>
                            <DatePicker Date="{Binding CurrentPerson.DateOfBirth}" Format="dd/MM/yyyy" FontSize="16"/>
                        </VerticalStackLayout>

                    </VerticalStackLayout>
                </Frame>

                <!-- Contact Information Section -->
                <Label Text="Contact Information" 
                       FontSize="18" 
                       FontAttributes="Bold"
                       TextColor="#4CAF50"
                       Margin="0,10,0,0"/>
                
                <Frame Padding="15" 
                       BackgroundColor="#F5F5F5" 
                       BorderColor="#E0E0E0"
                       CornerRadius="10">
                    <VerticalStackLayout Spacing="15">
                        
                        <!-- Email -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Email *" FontSize="14" FontAttributes="Bold"/>
                            <Entry Text="{Binding CurrentPerson.email}" Placeholder="Enter email address" Keyboard="Email" FontSize="16"/>
                        </VerticalStackLayout>

                        <!-- Address -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Address" FontSize="14" FontAttributes="Bold"/>
                            <Entry Text="{Binding CurrentPerson.Address}" Placeholder="Enter physical address" FontSize="16"/>
                        </VerticalStackLayout>

                    </VerticalStackLayout>
                </Frame>

                <!-- Medical Information Section -->
                <Label Text="Medical Information" 
                       FontSize="18" 
                       FontAttributes="Bold"
                       TextColor="#4CAF50"
                       Margin="0,10,0,0"/>
                
                <Frame Padding="15" 
                       BackgroundColor="#F5F5F5" 
                       BorderColor="#E0E0E0"
                       CornerRadius="10">
                    <VerticalStackLayout Spacing="15">
                        
                        <!-- Allergies -->
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Allergies" FontSize="14" FontAttributes="Bold"/>
                            <Editor Text="{Binding CurrentPerson.Allergies}"
                                    Placeholder="List any allergies (medications, food, environmental)" 
                                    HeightRequest="100"
                                    FontSize="16"/>
                        </VerticalStackLayout>

                    </VerticalStackLayout>
                </Frame>

                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,20,0,10">
                    <Button Grid.Column="0"
                            Text="Cancel"
                            Command="{Binding CancelCommand}"
                            BackgroundColor="#F5F5F5"
                            TextColor="#666666"
                            FontSize="16"
                            HeightRequest="50"
                            CornerRadius="10"
                            BorderColor="#CCCCCC"
                            BorderWidth="1"/>
                    
                    <Button Grid.Column="1"
                            Text="{Binding SaveButtonText}"
                            Command="{Binding SaveCommand}"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            FontSize="16"
                            FontAttributes="Bold"
                            HeightRequest="50"
                            CornerRadius="10"/>
                </Grid>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Loading Overlay -->
        <Grid IsVisible="{Binding IsLoading}" BackgroundColor="#80000000">
            <ActivityIndicator IsRunning="True" Color="White" WidthRequest="50" HeightRequest="50"/>
        </Grid>
    </Grid>
</ContentPage>